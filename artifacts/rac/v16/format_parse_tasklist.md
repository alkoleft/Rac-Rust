# RAC v16 Format Parse Tasklist (gaps/tails/no capture)

Источник: `docs/rac/messages/rac_message_formats_*.md` и `docs/rac/messages/rac_v11_capture_plan_prompt.md`.

**Capture Requirements (v11)**
- [ ] Использовать `scripts/rac/capture_rac_command.sh` и сохранять: `logs/session_*/client_to_server.stream.bin`, `logs/session_*/server_to_client.stream.bin`, payload в `artifacts/rac/<label>.hex`, вывод `rac` в `artifacts/rac/<label>_rac.out`. — Статус: захват [ ], анализ [ ], описание [ ]
- [ ] Для подтверждения полей/смещений делать минимум 2 контрастных варианта значений (ноль/неноль, пусто/непусто, разные enum). — Статус: захват [ ], анализ [ ], описание [ ]

**Agent**
- [ ] `rac agent admin list`: захват с `auth=pwd,os`, `os-user` и `descr` непустыми; сопоставить `unknown_tag/unknown_flags/unknown_tail` с полями `auth/os-user/descr` и проверить несколько записей. — Статус: захват [x], анализ [x], описание [x]
- [ ] `rac agent version`: получить захват запроса/ответа и подтвердить порядок/формат ответа. — Статус: захват [x], анализ [x], описание [x]
- [ ] `rac agent admin register`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [x], анализ [x], описание [x]
- [ ] `rac agent admin remove`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [x], анализ [x], описание [x]

**Cluster**
- [ ] `rac cluster list`: захват с ненулевыми `max-memory-size`, `max-memory-time-limit`, `errors-count-threshold`, с `allow-access-right-audit-events-recording` и непустым `restart-schedule`; подтвердить смещения и расшифровать `tail[32]` (v16). — Статус: захват [~], анализ [x], описание [x]
- [ ] `rac cluster info`: подтвердить те же неизвестные поля/хвост, что и в `cluster list`. — Статус: захват [x], анализ [x], описание [x]
- [ ] `rac cluster admin list`: захват с `auth=pwd,os`, `os-user`, `descr`; идентифицировать `unknown_1/unknown_2` и порядок строк. — Статус: захват [x], анализ [x], описание [x]
- [ ] `rac cluster admin register`: захват с `--auth=pwd,os` и `--auth=os`; подтвердить `auth_flags` и смысл `unknown_0` в хвосте запроса. — Статус: захват [x], анализ [x], описание [x]
- [ ] `rac cluster admin remove`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [x], анализ [x], описание [x]
- [ ] `rac cluster insert`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [ ], анализ [ ], описание [ ]
- [ ] `rac cluster update`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [x], анализ [x], описание [x]
- [ ] `rac cluster remove`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [ ], анализ [ ], описание [ ]

**Connection**
- [ ] `rac connection list`: захват с ненулевым `blocked-by-ls` для подтверждения поля `blocked_by_ls`. — Статус: захват [~], анализ [x], описание [x]
- [ ] `rac connection list`: захват с `--process` для определения порядка полей запроса. — Статус: захват [x], анализ [x], описание [x]
- [ ] `rac connection list`: захват с `--infobase` для определения порядка полей запроса. — Статус: захват [x], анализ [x], описание [x]
- [ ] `rac connection list`: захват с `--infobase-user` для определения порядка полей запроса. — Статус: захват [x], анализ [x], описание [x]
- [ ] `rac connection list`: захват с `--infobase-pwd` для определения порядка полей запроса. — Статус: захват [x], анализ [x], описание [x]
- [ ] `rac connection info`: захват запроса/ответа для определения порядка полей запроса. — Статус: захват [x], анализ [x], описание [x]
- [ ] `rac connection disconnect`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [x], анализ [x], описание [x]

**Infobase**
- [ ] `rac infobase summary list`: захват с разными значениями, чтобы идентифицировать `u8 tag` в записи. — Статус: захват [~], анализ [x], описание [x]
- [ ] `rac infobase info`: получить v11-захват payload и сопоставить неизвестные строки/байты и `tail[28]` с полями. — Статус: захват [x], анализ [x], описание [x]
- [ ] `rac infobase summary info`: получить захват и подтвердить формат ответа. — Статус: захват [x], анализ [x], описание [x]
- [ ] `rac infobase summary update`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [x], анализ [x], описание [x]
- [ ] `rac infobase create`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [ ], анализ [ ], описание [ ]
- [ ] `rac infobase update`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [ ], анализ [ ], описание [ ]
- [ ] `rac infobase drop`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [ ], анализ [ ], описание [ ]

**Lock**
- [ ] `rac lock list`: захват с `descr-flag != 0x01` для подтверждения значений и смысла. — Статус: захват [~], анализ [x], описание [x]
- [ ] `rac lock list`: захват с ненулевым `object` UUID для подтверждения хвоста записи. — Статус: захват [~], анализ [x], описание [x]
- [ ] `rac lock list --session`: захват, чтобы проверить наличие дополнительных полей в запросе. — Статус: захват [x], анализ [x], описание [x]

**Process**
- [ ] `rac process list`: определить `gap_0` (8 байт) и неизвестный хвост после license block; нужен захват с вариативными значениями (разные серверы/нагрузка). — Статус: захват [~], анализ [x], описание [x]
- [ ] `rac process info`: определить `gap_0` (8 байт) и неизвестный хвост после license block; нужен захват с вариативными значениями (разные серверы/нагрузка). — Статус: захват [~], анализ [x], описание [x]
- [ ] `rac process list --licenses`: определить `gap_license_0` и подтвердить хвостовые поля `use`/`reserve`/`memory-excess-time`. — Статус: захват [~], анализ [x], описание [x]
- [ ] `rac process info --licenses`: определить `gap_license_0` и подтвердить хвостовые поля `use`/`reserve`/`memory-excess-time`. — Статус: захват [~], анализ [x], описание [x]

**Server**
- [ ] `rac server list`: определить назначения `gap_1..gap_6` (ожидаемые `memory-limit`, `connections-limit`, `safe-working-processes-memory-limit`), подтвердить порядок `port-range` и поведение `gap_7` с непустым `restart-schedule`. — Статус: захват [~], анализ [ ], описание [ ]
- [ ] `rac server info`: определить назначения `gap_1..gap_6` (ожидаемые `memory-limit`, `connections-limit`, `safe-working-processes-memory-limit`), подтвердить порядок `port-range` и поведение `gap_7` с непустым `restart-schedule`. — Статус: захват [~], анализ [ ], описание [ ]
- [ ] `rac server insert`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [ ], анализ [ ], описание [ ]
- [ ] `rac server update`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [x], анализ [ ], описание [ ]
- [ ] `rac server remove`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [ ], анализ [ ], описание [ ]

**Session**
- [ ] `rac session info`: получить v11-захват payload для подтверждения порядка/наличия полей. — Статус: захват [x], анализ [ ], описание [ ]
- [ ] `rac session list --licenses`: захват запроса, чтобы зафиксировать наличие и порядок `licenses` флага. — Статус: захват [x], анализ [ ], описание [ ]
- [ ] `rac session info --licenses`: захват запроса, чтобы зафиксировать наличие и порядок `licenses` флага. — Статус: захват [x], анализ [ ], описание [ ]
- [ ] `rac session terminate`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [x], анализ [ ], описание [ ]
- [ ] `rac session interrupt-current-server-call`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [x], анализ [ ], описание [ ]

**Profile**
- [ ] `rac profile list`: захват с непустым списком для подтверждения формата записи. — Статус: захват [ ], анализ [ ], описание [ ]
- [ ] `rac profile update`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [ ], анализ [ ], описание [ ]
- [ ] `rac profile remove`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [ ], анализ [ ], описание [ ]
- [ ] `rac profile acl directory list`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [ ], анализ [ ], описание [ ]
- [ ] `rac profile acl directory update`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [ ], анализ [ ], описание [ ]
- [ ] `rac profile acl directory remove`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [ ], анализ [ ], описание [ ]
- [ ] `rac profile acl com list`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [ ], анализ [ ], описание [ ]
- [ ] `rac profile acl com update`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [ ], анализ [ ], описание [ ]
- [ ] `rac profile acl com remove`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [ ], анализ [ ], описание [ ]
- [ ] `rac profile acl addin list`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [ ], анализ [ ], описание [ ]
- [ ] `rac profile acl addin update`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [ ], анализ [ ], описание [ ]
- [ ] `rac profile acl addin remove`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [ ], анализ [ ], описание [ ]
- [ ] `rac profile acl module list`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [ ], анализ [ ], описание [ ]
- [ ] `rac profile acl module update`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [ ], анализ [ ], описание [ ]
- [ ] `rac profile acl module remove`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [ ], анализ [ ], описание [ ]
- [ ] `rac profile acl app list`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [ ], анализ [ ], описание [ ]
- [ ] `rac profile acl app update`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [ ], анализ [ ], описание [ ]
- [ ] `rac profile acl app remove`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [ ], анализ [ ], описание [ ]
- [ ] `rac profile acl inet list`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [ ], анализ [ ], описание [ ]
- [ ] `rac profile acl inet update`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [ ], анализ [ ], описание [ ]
- [ ] `rac profile acl inet remove`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [ ], анализ [ ], описание [ ]

**Counter**
- [ ] `rac counter list`: захваты с разными enum (`group`, `filter-type`, `duration`, и др.), подтвердить кодировки. — Статус: захват [~], анализ [ ], описание [ ]
- [ ] `rac counter info`: захваты с разными enum (`group`, `filter-type`, `duration`, и др.), подтвердить кодировки. — Статус: захват [~], анализ [ ], описание [ ]
- [ ] `rac counter values`: захваты с разными enum (`group`, `filter-type`, `duration`, и др.), подтвердить кодировки. — Статус: захват [~], анализ [ ], описание [ ]
- [ ] `rac counter accumulated-values`: захваты с разными enum (`group`, `filter-type`, `duration`, и др.), подтвердить кодировки. — Статус: захват [~], анализ [ ], описание [ ]
- [ ] `rac counter update`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [x], анализ [ ], описание [ ]
- [ ] `rac counter clear`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [x], анализ [ ], описание [ ]
- [ ] `rac counter remove`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [x], анализ [ ], описание [ ]

**Limit**
- [ ] `rac limit list`: захваты с разными `action` и ненулевыми лимитами, подтвердить enum и поля. — Статус: захват [~], анализ [ ], описание [ ]
- [ ] `rac limit info`: захваты с разными `action` и ненулевыми лимитами, подтвердить enum и поля. — Статус: захват [~], анализ [ ], описание [ ]
- [ ] `rac limit update`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [x], анализ [ ], описание [ ]
- [ ] `rac limit remove`: получить захват запроса/ответа, восстановить порядок полей. — Статус: захват [x], анализ [ ], описание [ ]

**Rule**
- [ ] `rac rule apply --partial`: захват для подтверждения enum `apply_mode`. — Статус: захват [x], анализ [ ], описание [ ]
- [ ] `rac rule list`: захват с непустыми `infobase-name`, `application-ext` и `priority>0`; проверить `object-type` и `rule-type`. — Статус: захват [x], анализ [ ], описание [ ]
- [ ] `rac rule info`: захват с `rule-type=always/never` и `priority>0` для подтверждения enum и порядка. — Статус: захват [x], анализ [ ], описание [ ]
- [ ] `rac rule insert`: захват с непустыми `infobase-name`, `application-ext`, `priority>0` для подтверждения смещений. — Статус: захват [x], анализ [ ], описание [ ]
- [ ] `rac rule update`: захват с непустыми полями для подтверждения смещений и наличия предварительного `rule info`. — Статус: захват [x], анализ [ ], описание [ ]
- [ ] `rac rule remove`: захват ошибки (неуспешный запрос) для описания формата ошибок. — Статус: захват [x], анализ [ ], описание [ ]
