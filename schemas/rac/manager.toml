[record.ManagerRecord]
derive = ["Debug", "Serialize", "Clone"]
fields = [
  { name = "manager", type = "uuid" },
  { name = "descr", type = "str8" },
  { name = "host", type = "str8" },
  { name = "using", type = "u32_be" },
  { name = "port", type = "u16_be" },
  { name = "pid", type = "str8" },
]

[request.ManagerListRequest]
derive = ["Debug", "Clone"]
fields = [
  { name = "cluster", type = "uuid" },
]

[request.ManagerInfoRequest]
derive = ["Debug", "Clone"]
fields = [
  { name = "cluster", type = "uuid" },
  { name = "manager", type = "uuid" },
]

[rpc.ManagerList]
request = "ManagerListRequest"
method_req = 0x12
method_resp = 0x13
requires_cluster_context = true
requires_infobase_context = false

[rpc.ManagerInfo]
request = "ManagerInfoRequest"
method_req = 0x14
method_resp = 0x15
requires_cluster_context = true
requires_infobase_context = false

[response.ManagerList]
body = { type = "list_u8", item = "ManagerRecord" }
tests = [{ name = "manager_list_response_hex", hex_path = "../../../../artifacts/rac/manager_list_response.hex", expect_len = 1, asserts = [{ index = 0, field = "host", value = "alko-home" }, { index = 0, field = "using", value = 1 }, { index = 0, field = "port", value = 0x0605 }, { index = 0, field = "pid", value = "314037" }] }]

[response.ManagerInfo]
body = { type = "record", item = "ManagerRecord" }
tests = [{ name = "manager_info_response_hex", hex_path = "../../../../artifacts/rac/manager_info_response.hex", asserts = [{ field = "host", value = "alko-home" }, { field = "using", value = 1 }, { field = "port", value = 0x0605 }, { field = "pid", value = "314037" }] }]
